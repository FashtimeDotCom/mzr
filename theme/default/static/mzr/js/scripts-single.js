(function(B){B.fn.colorTip=function(D){var E={timeout:300,margin:true,className:"normal"};D=B.extend(E,D);return this.each(function(){var H=B(this);if(!H.attr("title")){return true}var F=new C();var I=H.attr("title"),G=new A(I,D.margin,D.className);H.append(G.generate()).addClass("colorTipContainer");H.hover(function(){H.removeAttr("title");G.show();F.clear()},function(){F.set(function(){G.hide();H.attr("title",I)},D.timeout)})})};function C(){}C.prototype={set:function(E,D){this.timer=setTimeout(E,D)},clear:function(){clearTimeout(this.timer)}};function A(D,F,E){this.content=D;this.margin=F;this.className=E;this.shown=false}A.prototype={generate:function(){return this.tip||(this.tip=B('<span class="colorTip">'+this.content+'<span class="pointyTip"></span></span>'))},show:function(){if(this.shown){return}this.margin?(this.tip.css("margin-left",-this.tip.outerWidth()/2)):"";this.tip.addClass(this.className);this.tip.fadeIn("fast");this.shown=true},hide:function(){this.tip.fadeOut();this.shown=false}}})(jQuery);jQuery(document).ready(function(E){var B=E(".search-input").val(),A=(window.opera)?(document.compatMode=="CSS1Compat"?E("html"):E("body")):E("html,body");E(".pages-next a").attr("title",E(".pages-next a").text());E(".pages-prev a").attr("title",E(".pages-prev a").text());E(".pages-next a,.pages-prev a").text("").css({"text-indent":0});E(".pages-prev a").colorTip({margin:false,className:"left"});E(".pages-next a").colorTip({margin:false,className:"right"});E("#goback").hide();if(E("#widgets-sns").length&&E("#widgets-sns ul a").length){E("#widgets-sns ul a").colorTip({})}E(".search-input").focus(function(){if(E.trim(E(this).val())==B){E(this).val("")}}).blur(function(){if(E(this).val()==""){E(this).val(B)}});if(E("#sidebar-fixed").length>0){var C=E("#sidebar-fixed").offset().top}E(window).scroll(function(){var D=E(window).scrollTop();if(D>50){E("#goback").show()}else{E("#goback").hide()}if(E("#sidebar-fixed").length>0&&E(".main").height()>E("#sidebar").height()){if(D>C+60){E("#sidebar-fixed").addClass("fixed")}else{E("#sidebar-fixed").removeClass("fixed")}}});E("#goback").click(function(D){D.preventDefault();D.returnValue=false;A.animate({scrollTop:0},600,function(){E("#goback").hide()});return false});E(".more-active").hover(function(){E(this).children(".more-items").show()},function(){if(!(E.browser.msie&&E.browser.version=="6.0")){E(this).children(".more-items").hide()}});E(".menu-parent-item").hover(function(){E(this).children(".sub-menu").show()},function(){if(!(E.browser.msie&&E.browser.version=="6.0")){E(this).children(".sub-menu").hide()}})});jQuery(document).ready(function(G){if(G.browser.msie&&parseInt(G.browser.version,10)<9){G(".main-body img").each(function(){var H=G(this).attr("width"),F=G(this).attr("height");if(H>695){A=695/H*F;G(this).removeAttr("height").removeAttr("width").attr({width:695,height:F})}})}G(".comment-reply-link").click(function(I){I.preventDefault();I.returnValue=false;var H='"#'+G(this).closest(".comment-body").attr("id")+'"';var F=G(this).parent().prev().prev().text();G("#comment-textarea").attr("value","<a href="+H+">@"+F+" </a>").focus();return false});G("#cancel-comment-reply a").click(function(){G("#comment").attr("value","")});G("#comment-textarea").bind("focus",function(){if(G("#author-textarea").hasClass("commented")){return false}G("#author-info").slideDown()});G("#author-avatar").bind("click",function(){G("#author-info").slideToggle()});G(".share-list").hover(function(){G(".dropdown-list").show()},function(){G(".dropdown-list").hide()});(function(){var J=encodeURIComponent(document.location);var D=encodeURIComponent(document.title.substring(0,76));var L=G(".main-body img").length>0?G(".main-content img").eq(0).attr("src"):"";var K=function(F,H){return["toolbar=0,status=0,resizable=1,width="+F+",height="+H+",left=",(screen.width-F)/2,",top=",(screen.height-H)/2].join("")};G(".likes-weibo").click(function(I){I.preventDefault();var H="http://service.weibo.com/share/share.php?title="+D+"&url="+J+"&pic=";var F=K(634,668);window.open(H,"Share",F);return false});G(".likes-tx").click(function(I){I.preventDefault();var H="http://share.v.t.qq.com/index.php?c=share&a=index&title="+D+"&url="+J+"&pic="+L;var F=K(634,668);window.open(H,"Share",F);return false});G(".likes-renren").click(function(I){I.preventDefault();var H="http://widget.renren.com/dialog/share?title="+D+"&resourceUrl="+J+"&pic="+L;var F=K(634,668);window.open(H,"Share",F);return false});G(".likes-qq").click(function(I){I.preventDefault();var H="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+D+"&url="+J+"&pics=";var F=K(634,668);window.open(H,"Share",F);return false});G(".likes-douban").click(function(I){I.preventDefault();var H="http://shuo.douban.com/%21service/share?name="+D+"&href="+J+"&image="+L;var F=K(634,668);window.open(H,"Share",F);return false})}());var E=G(window),C=E.width();B(0);E.resize(function(){if(G(this).width()==C){return false}C=G(this).width();B(E.scrollTop());return false}).scroll(function(){B(E.scrollTop())});function B(D){G(".main-body img").each(function(){var H=G(this).offset().top,J=E.height()+D;if(H<J){var F=G(this).attr("data-original");if(F!=undefined){G(this).attr("src",F).removeAttr("data-original").addClass("lazy").parent().removeClass("loading")}else{G(this).addClass("lazy").parent().removeClass("loading")}}else{var F=G(this).attr("data-original");if(F!=undefined){G(this).attr("src",F).removeAttr("data-original")}return false}})}});